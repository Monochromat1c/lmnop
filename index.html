<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‚úâÔ∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-pink-100 to-blue-100">
    <audio id="bg-music" src="src/audio/bgm.mp3" loop></audio>
    <div class="p-6 z-20 relative" id="main-content">
      <!-- Message Modal -->
      <div id="msg-1" class="fixed inset-0 z-40 flex items-center justify-center bg-black/40 backdrop-blur-sm">
        <div class="px-6">
          <div class="w-full max-w-2xl mx-auto p-8 bg-white/80 rounded-xl shadow-lg flex flex-col items-center gap-3 relative">
            <!-- Push Pin Icon -->
            <img src="src/images/pin.png" alt="Pin" class="absolute top-3 right-3 w-6 h-6 text-gray-500" />
            <h1 id="typewriter-header" class="text-3xl md:text-5xl mt-2 font-bold text-center text-green-700"></h1>
            <div class="text-lg md:text-2xl text-center text-gray-800">
              <p id="typewriter-msg" class="whitespace-pre-line"></p>
            </div>
            <div id="message-navigation" class="flex flex-row gap-4 w-full justify-center hidden mt-3">
              <button id="prevMsgBtn" class="flex-1 py-3 px-6 rounded-lg bg-gray-600 text-white text-sm font-semibold hover:bg-gray-700 transition">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6 inline-block mr-2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                </svg>
              </button>
              <button id="nextMsgBtn" class="flex-1 py-3 px-6 rounded-lg bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700 transition flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-6 h-6 inline-block mr-2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal Overlay -->
    <div id="landing-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm">
      <div class="px-6">
        <div class="w-full max-w-md mx-auto p-6 bg-white rounded-xl shadow-lg flex flex-col items-center gap-3">
          <h2 class="text-2xl md:text-3xl font-bold text-center text-green-700">Welcome po Wealyn! üòÅ</h2>
          <p class="text-base md:text-lg text-center text-gray-700">This page contains a special message for you. It may take
            a while to read. <span class="font-semibold text-red-600">For the best experience, please make sure
              your device volume is up!</span></p>
          <div class="flex flex-col sm:flex-row gap-4 w-full justify-center">
            <button id="proceedBtn"
              class="flex-1 py-3 px-6 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition">Okay</button>
            <!-- <button id="cancelBtn" class="flex-1 py-3 px-6 rounded-lg bg-gray-300 text-gray-800 font-semibold hover:bg-gray-400 transition">Cancel</button> -->
          </div>
        </div>
      </div>
    </div>
    <!-- Cancel Message Modal -->
    <div id="cancel-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm">
      <div class="w-full max-w-md mx-auto p-6 px-4 bg-white rounded-xl shadow-lg flex flex-col items-center gap-3">
        <h2 class="text-2xl md:text-3xl font-bold text-center text-gray-700">Maybe Next Time!</h2>
        <p class="text-base md:text-lg text-center text-gray-600">You chose not to continue. If you change your mind, you can always come back and read your special message.</p>
        <button id="backBtn" class="py-3 px-8 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition">Back</button>
      </div>
    </div>
    <!-- Twinkling Stars Background with Overlay -->
    <div id="twinkle-overlay" class="pointer-events-none select-none fixed inset-0 z-10 bg-black/20"></div>
    <div id="twinkle-bg" class="pointer-events-none select-none fixed inset-0 z-10 overflow-hidden"></div>
    <!-- Sign In Modal -->
    <div id="sign-in-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-slate-300 shadow-lg backdrop-blur-sm">
      <div class="px-6">
        <div class="w-full max-w-md mx-auto p-6 bg-white rounded-xl shadow-lg flex flex-col items-center gap-2">
          <h2 class="text-2xl font-bold text-center text-red-700">‚ö†Ô∏èWARNING‚ö†Ô∏è</h2>
          <h1 class="text-md font-bold text-left text-slate-700">The content of this page is solely for <span class="text-red-700">Wealyn S. Yap</span>! In order to avoid unauthorized access, you are required to enter a word only Wealyn would know. </h1>
          <p class="text-slate-700 text-sm">Clue: First name of my twin (lowercase tanan wengg HAHAHAHAHA)</p>
          <input type="text" id="sign-in-input" class="border border-gray-300 rounded-lg p-2 w-full  mt-3" placeholder="Enter the secret word" />
          <button id="sign-in-btn" class="py-3 px-6 flex w-full justify-center mt-2 rounded-lg bg-green-600 text-white font-semibold hover:bg-green-700 transition"><p>Proceed</p></button>
          <p id="sign-in-error" class="text-red-500 hidden">Incorrect word, please try again.</p>
        </div>
      </div>
    </div>
    <div id="loading-spinner" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm">
      <div class="loader"></div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const audio = document.getElementById('bg-music');
        const landingModal = document.getElementById('landing-modal');
        const cancelModal = document.getElementById('cancel-modal');
        const mainContent = document.getElementById('main-content');
        const proceedBtn = document.getElementById('proceedBtn');
        const backBtn = document.getElementById('backBtn');
        const signInModal = document.getElementById('sign-in-modal');
        const signInInput = document.getElementById('sign-in-input');
        const signInBtn = document.getElementById('sign-in-btn');
        const signInError = document.getElementById('sign-in-error');
        const loadingSpinner = document.getElementById('loading-spinner');
        if (proceedBtn) {
          proceedBtn.onclick = function() {
            landingModal.style.display = 'none';
            audio.volume = 0.7;
            audio.play().catch(() => {});
            typeWriterHeader();
          };
        }
        if (document.getElementById('cancelBtn')) {
          document.getElementById('cancelBtn').onclick = function() {
            landingModal.style.display = 'none';
            mainContent.style.filter = 'blur(2px)';
            cancelModal.style.display = 'flex';
          };
        }
        if (backBtn) {
          backBtn.onclick = function() {
            cancelModal.style.display = 'none';
            mainContent.style.filter = '';
            landingModal.style.display = 'flex';
          };
        }
        if (signInBtn) {
          signInBtn.onclick = async function() {
            const hashedInput = "a553c8dc7ec47458d254a4dab2062ce2e6236359e8059f190c8bc6f60ec5153e";
            const userInput = signInInput.value;
            const hashedUserInput = await hashFunction(userInput);

            if (hashedUserInput === hashedInput) {
              loadingSpinner.style.display = 'flex'; // Show loading spinner
              setTimeout(() => {
                loadingSpinner.style.display = 'none'; // Hide loading spinner
                signInModal.style.display = 'none'; // Hide sign-in modal after loading
                landingModal.style.display = 'flex'; // Show landing modal
              }, 3000); // Show for 3 seconds
            } else {
              signInError.classList.remove('hidden');
              signInInput.value = '';
              setTimeout(() => {
                signInError.classList.add('hidden');
              }, 3000); // Hide error after 3 seconds
            }
          };
        }
        // Twinkling stars logic
        const twinkleBg = document.getElementById('twinkle-bg');
        const STAR_COUNT = 40;
        const STAR_COLORS = ['#fff', '#a5b4fc', '#f0abfc', '#f9a8d4']; // white, blue, purple, pink
        for (let i = 0; i < STAR_COUNT; i++) {
          const star = document.createElement('div');
          star.className = 'twinkle-star';
          star.style.left = Math.random() * 100 + 'vw';
          star.style.top = Math.random() * 100 + 'vh';
          const size = Math.random() * 4 + 2;
          star.style.width = star.style.height = size + 'px';
          star.style.background = STAR_COLORS[Math.floor(Math.random() * STAR_COLORS.length)];
          star.style.animationDelay = (Math.random() * 6) + 's';
          twinkleBg.appendChild(star);
        }
        // Typewriter effect for msg-1
        const typewriterHeader = document.getElementById('typewriter-header');
        const headerText = "Congratulations, WEALYYYYYYYYN!";
        let twHeaderIndex = 0;
        function typeWriterHeader() {
          if (twHeaderIndex <= headerText.length) {
            typewriterHeader.textContent = headerText.slice(0, twHeaderIndex);
            twHeaderIndex++;
            setTimeout(typeWriterHeader, 50);
          } else {
            typeWriterMsg(); // Start message typewriter after header finishes
          }
        }
        const typewriterMsg = document.getElementById('typewriter-msg');
        const message1_1 = `Yudiiiiii graduate na sa kuno HAHAHAHAHAHHAHAHA`;
        const message1_2 = `I am genuinely proud gid ya para sa imo as your friend!!!! Nakita ko gid kung pano ka magbakas (lalo na sa aton capstone HAHAHAHAHAHAHA)`
        const message1_3 = `Gusto ko lang ihambal nga na appreciate ko gid ang imo effort sa pag ubra sang papers naton, sa mga pagpulaw mo, kag sa mga time nga nastress ka ubra, for sure wala gid nasayang ang imo efforts kag pagpangabudlay kay as you can see, graduate na ta yeeeyyyyyy`
        const message1_4 = `Mamiss ka gid nakon frfr kay isa ka gid sa gin turing ko nga genuine friend ko gid ya ü•∫ü•π`
        const message1_5 = `Sorry gid kung masyado ko kasabad kag gamo gamo sa chat kis-a (indi lang kis-a, laban gid ya HAHAHAHAHAHA)`
        const message1_6 = `Daw sa imo ko lang gid bi nafeel nga comfortable gid ko as in so sinawo mo gid tanan tanan HAHAHAHAHAHAHAHAH sorry gid ya wealyyyyyyn üò≠üôèüèª`
        const message1_7 = `Sobra gid ko ka thankful kay naging part ka sang akon college life (although 3rd year na ta naging close nga duwa, which naga regret gid ko ya kay way ta ka ngadaan gin befriend ü•π)`
        const message1_8 = `HALAAAAA ANO INI ANG GATULO SAKON CHURA!! GAGI GAULAN SA SULOD SANG KWARTO YA`
        const message1_9 = `You might not know this, pero aside kay kezia, mahambal ko gid nga naapektuhan mo gid akon personality (positively). I can confidently say nga mas naging 'positive' ko umpisa sang nag upod ko simo. Kung wala na natabo, panigurado nega man ko gyapon asta yanda`
        const message1_10 = `Umpisa sang naging friends ta, amat amat naglain ang akon view sa life, like napanumdom ko nga why not e enjoy nalang ang nabilin ko nga time sa college kay manog graduate naman ko`
        const message1_11 = `Mina nga kung may mga event or kung nano, naga attend nalang ko kay I want to make memories upod ka kay feel ko ulhi na gid ta nga duwa naging close`
        const message1_12 = `Gagiiii gatalisik di sakon kwarto ya. Sirado man gani ang bintana kag HAHAHAHAHAHAHA`
        const message1_13 = `OKAYYY TAMA NA NA, BASI MAGWAWAW KO DI KARON ISA LANG KO SA KWARTO HAHAHAHAHAHAHAHHA`
        const message1_14 = `May ihambal pako tani tungkol sa inyo ni twin kaso baka magka-unauthorized access tong message at mabasahan ng iba HAHAHAHAHAHA. Basta bal-an mo naman na akon nahambal pirmi HAHAHAHAHAHAHA, e wish ko lang kamo di nga duwa pirmi üòÅ‚ú®`
        const message1_15 = `I genuinely hope and want to see you succeed in life!!!`
        const message1_16 = `Grabi ari na ta sa next page sang aton kabuhi. Mini gid ang ginatawag nila nga real world. Tas pareho pa ta nga duwa wala kabalo kung ano aton himuon HAHAHAHAHAHAHA`
        const message1_17 = `Kung ano man ang aton magiging next nga decision, tani magiging positive ang impact sina sa aton life, kag tani ipalayo lang ta sa hardships kag failure`
        const message1_18 = `Sa liwat, big congratulations sa imo WEAAALYYYN!!!! üéìüéâüíñ`
        const message1_19 = `I wish you a successful journey in your adult life!! `
        const message1_20 = `P.S. Tani nagustohan mo akon small token of appreciation para simo HAHAHAHAHAHAHAHAHA`
        let twMsgIndex = 0;
        let currentTextIndex = 0; // To keep track of which text is being typed
        const textsToType = [message1_1, message1_2, message1_3, message1_4, message1_5, message1_6, message1_7, message1_8, message1_9, message1_10, message1_11, message1_12, message1_13, message1_14, message1_15, message1_16, message1_17, message1_18, message1_19, message1_20]; // Array of texts to type
        let typingComplete = false; // Flag to indicate if typing of current message is complete
        function typeWriterMsg() {
          if (currentTextIndex < textsToType.length) {
            const currentText = textsToType[currentTextIndex];
            // Typing phase
            if (twMsgIndex <= currentText.length) {
              typewriterMsg.textContent = currentText.slice(0, twMsgIndex);
              twMsgIndex++;
              setTimeout(typeWriterMsg, 1); // Adjusted for 100 wpm
            } else {
              // Finished typing current text, now show Next button
              typingComplete = true;
              if (currentTextIndex + 1 < textsToType.length) {
                document.getElementById('message-navigation').classList.remove('hidden');
              }
            }
          }
        }
        function startBackspace() {
          document.getElementById('message-navigation').classList.add('hidden'); // Hide next button
          const currentElementText = typewriterMsg.textContent;
          if (currentElementText.length > 0) {
            typewriterMsg.textContent = currentElementText.slice(0, currentElementText.length - 1);
            setTimeout(startBackspace, 5);
          } else {
            currentTextIndex++;
            twMsgIndex = 0;
            typingComplete = false;
            setTimeout(typeWriterMsg, 40);
          }
        }
        // Hook up the next button
        document.getElementById('nextMsgBtn').onclick = function() {
          if (typingComplete) {
            startBackspace();
          }
        };
        document.getElementById('prevMsgBtn').onclick = function() {
          if (currentTextIndex > 0) {
            currentTextIndex--;
            twMsgIndex = 0;
            typingComplete = false;
            typewriterMsg.textContent = '';
            document.getElementById('message-navigation').classList.add('hidden');
            typeWriterMsg();
          }
        };
        // Modal navigation logic can be added here for msg-2 to msg-5
      });

      function hashFunction(input) {
        const encoder = new TextEncoder();
        const data = encoder.encode(input);
        return crypto.subtle.digest('SHA-256', data).then(hashBuffer => {
          const hashArray = Array.from(new Uint8Array(hashBuffer));
          const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
          return hashHex;
        });
      }
    </script>
    <style>
      .twinkle-star {
        position: absolute;
        /* Remove border-radius for diamond */
        /* border-radius: 50%; */
        opacity: 0.85;
        box-shadow: 0 0 16px 6px #fff8, 0 0 32px 12px #fff3;
        animation: twinkle 2.5s infinite ease-in-out;
        transform: rotate(45deg);
      }
      @keyframes twinkle {
        0%, 100% { opacity: 0.85; }
        50% { opacity: 0.2; }
      }
      .loader {
        border: 8px solid #f3f3f3; /* Light grey */
        border-top: 8px solid #3498db; /* Blue */
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </body>
</html> 